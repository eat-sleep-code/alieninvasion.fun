(()=>{var t={756:()=>{new Audio("audio/boom.mp3"),new Audio("audio/boss.mp3"),new Audio("audio/fire.mp3"),new Audio("audio/hit.mp3"),new Audio("audio/lose.mp3"),new Audio("audio/power.mp3"),new Audio("audio/start.mp3"),new Audio("audio/win.mp3")},990:()=>{var t="",e=!1;!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var s=(new Date).getTime(),a=Math.max(0,16-(s-t)),h=window.setTimeout((function(){e(s+a)}),a);return t=s+a,h}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();const i=new function(){var t=[];this.initialize=function(t,e,i){this.canvas=document.getElementById(t);var a=$(this.canvas).width(),h=$(this.canvas).height();if(this.canvas.width=a,this.canvas.height=h,this.playerOffset=20,this.canvasMultiplier=1,this.setupMobile(),this.width=this.canvas.width,this.height=this.canvas.height,this.ctx=this.canvas.getContext&&this.canvas.getContext("2d"),!this.ctx)return alert("Please upgrade your browser!");this.setupInput(),this.loop(),this.mobile&&this.setBoard(4,new n),s.load(e,i)};var e={37:"left",39:"right",32:"fire"};this.keys={},this.setupInput=function(){window.addEventListener("keydown",(function(t){e[t.keyCode]&&(i.keys[e[t.keyCode]]=!0,t.preventDefault())}),!1),window.addEventListener("keyup",(function(t){e[t.keyCode]&&(i.keys[e[t.keyCode]]=!1,t.preventDefault())}),!1)};var a=(new Date).getTime(),h=1/30;this.loop=function(){var e=(new Date).getTime();requestAnimationFrame(i.loop);var s=(e-a)/1e3;s>h&&(s=h);for(var n=0,o=t.length;n<o;n++)t[n]&&(t[n].step(s),t[n].draw(i.ctx));a=e},this.setBoard=function(e,i){t[e]=i},this.setupMobile=function(){document.getElementById("container");var t=!!("ontouchstart"in window),e=window.innerWidth,i=window.innerHeight;if(t&&(this.mobile=!0),screen.width>=1280||!t)return!1;e>i&&(alert("Please rotate the device!"),e=window.innerWidth,i=window.innerHeight),this.canvas.style.width="100vw",this.canvas.style.height="100vh"}},s=new function(){return this.map={},this.load=function(t,e){this.map=t,this.image=new Image,this.image.onload=e,this.image.src="images/sprites.png"},this.draw=function(t,e,i,s,a){var h=this.map[e];a||(a=0),t.drawImage(this.image,h.sx+a*h.w,h.sy,h.w,h.h,Math.floor(i),Math.floor(s),h.w,h.h)},this},a=function(){};a.prototype.setup=function(t,e){this.sprite=t,this.merge(e),this.frame=this.frame||0,this.w=s.map[t].w,this.h=s.map[t].h},a.prototype.merge=function(t){if(t)for(var e in t)this[e]=t[e]},a.prototype.draw=function(t){s.draw(t,this.sprite,this.x,this.y,this.frame)},a.prototype.hit=function(t){this.board.remove(this)};const h=function(t,e){this.levelData=[];for(var i=0;i<t.length;i++)this.levelData.push(Object.create(t[i]));this.t=0,this.callback=e};h.prototype.step=function(t){var i=0,s=[],a=null;for(this.t+=1e3*t;(a=this.levelData[i])&&a[0]<this.t+2e3;){if(this.t>a[1])s.push(a);else if(a[0]<this.t){var h=enemies[a[3]],n=a[4];this.board.add(new Enemy(h,n)),a[0]+=a[2]}i++}for(var o=0,r=s.length;o<r;o++){var l=this.levelData.indexOf(s[o]);-1!=l&&this.levelData.splice(l,1)}if(0===this.levelData.length&&0===this.board.cnt[OBJECT_ENEMY]&&this.callback&&this.callback(),0==e)try{String(a[3]).includes("Final")&&(e=!0,audio.boss.play())}catch(t){}},h.prototype.draw=function(t){};const n=function(){var e=i.width/5,s=e-10;this.drawSquare=function(t,i,a,h,n){t.globalAlpha=n?.1:.5,t.fillStyle="#CCC",t.fillRect(i,a,s,s),t.fillStyle="#FFF",t.globalAlpha=1,t.font="bold "+3*e/4+"px 'Verdana'";var o=t.measureText(h);t.fillText(h,i+s/2-o.width/2,a+3*s/4+5)},this.draw=function(t){t.save();var s=i.height-e;this.drawSquare(t,10,s,"ᐊ",i.keys.left),this.drawSquare(t,e+10,s,"ᐅ",i.keys.right),this.drawSquare(t,4*e,s,"✹",i.keys.fire),t.restore()},this.step=function(t){},this.trackTouch=function(s){var a;s.preventDefault(),i.keys.left=!1,i.keys.right=!1;for(var h=0;h<s.targetTouches.length;h++)(a=s.targetTouches[h].pageX/i.canvasMultiplier-i.canvas.offsetLeft)<e&&(t=t.concat("l"),i.keys.left=!0),a>e&&a<2*e&&(t=t.concat("r"),i.keys.right=!0),t.includes("lllllllllllllllllrrrrrrrrrrrrrrrr")&&PlayerShip.boost();if("touchstart"==s.type||"touchend"==s.type)for(h=0;h<s.changedTouches.length;h++)(a=s.changedTouches[h].pageX/i.canvasMultiplier-i.canvas.offsetLeft)>4*e&&(t=t.concat("u"),i.keys.fire="touchstart"==s.type)},i.canvas.addEventListener("touchstart",this.trackTouch,!0),i.canvas.addEventListener("touchmove",this.trackTouch,!0),i.canvas.addEventListener("touchend",this.trackTouch,!0),i.canvas.addEventListener("dblclick",(function(t){t.preventDefault()}),!0),i.canvas.addEventListener("click",(function(t){t.preventDefault()}),!0),i.playerOffset=e+20}}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var h=e[s]={exports:{}};return t[s](h,h.exports,i),h.exports}(()=>{const t=i(756),e=i(990);var s=navigator.userAgent.toLowerCase(),a=!1,h=!0,n=300,o=n,r=45,l=!1,d=0,c=[3,7,15,21,28,35,70,99],w=[5,9,23,42,49,69,89],u=1;e.playerHealth=n,e.defaultPlayerHealth=o,e.difficultyMultiplier=u,document.onkeydown=function(t){var e;window.event?e=window.event.keyCode:t&&(e=t.which),(t=t||window.event).preventDefault(),65==e&&t.ctrlKey&&t.shiftKey&&L.boost()};var p={ship:{sx:0,sy:0,w:37,h:42,frames:1},missile:{sx:0,sy:30,w:4,h:10,frames:1},enemy_purple:{sx:37,sy:0,w:42,h:43,frames:1},enemy_bee:{sx:79,sy:0,w:37,h:43,frames:1},enemy_ship:{sx:116,sy:0,w:42,h:43,frames:1},enemy_circle:{sx:158,sy:0,w:32,h:33,frames:1},explosion:{sx:0,sy:64,w:64,h:64,frames:12},enemy_missile:{sx:8,sy:42,w:4,h:20,frame:1},enemy_bee_final:{sx:215,sy:0,w:73,h:50,frames:1},enemy_straight_final:{sx:287,sy:0,w:73,h:65,frames:1},enemy_circle_final:{sx:360,sy:0,w:70,h:60,frames:1}},f=(Math.PI,Math.PI,function(){s.match(/android/)?e.setBoard(0,new E(50,.6,100,!0)):(e.setBoard(0,new E(20,.4,100,!0)),e.setBoard(1,new E(50,.6,100)),e.setBoard(2,new E(100,1,50))),$(window).width()<=576?e.setBoard(3,new SplashScreen("images/splash-mobile.svg","","",S)):e.setBoard(3,new SplashScreen("images/splash.svg","","",S))}),m=["ltr","circle","step","straight","wiggle"],y=["wiggleFinal","straightFinal","circleFinal"],v=[],g=0,x=0,b=0;r+=Math.round(r*(u/10));do{var k;if(0===g)k=0;else(k=b+Math.floor(2001*Math.random()+1e3)*(1==Math.floor(2*Math.random())?1:-1))<=0&&(k=x);x=k;var M,F,A=k+Math.floor(2001*Math.random()+3e3);b=A,g>r-4?(M=900,F=y[Math.floor(Math.random()*y.length)]):(M=Math.floor(401*Math.random()+400),F=m[Math.floor(Math.random()*m.length)]);var T=$("#game").width(),B=Math.floor(Math.random()*(T-10+1)+10);v.push([k,A,M,F,{x:B}]),g++}while(g<r);var S=function(){setTimeout((function(){var t=new GameBoard;t.add(new L),t.add(new Level(v,D)),e.playerHealth=o,w.includes(d)&&(e.playerHealth=e.playerHealth+100),c.includes(d)&&(l=!1),e.setBoard(3,t),1==h&&(e.setBoard(5,new GamePoints(0)),e.setBoard(6,new GameHealth(0)))}),500)},D=function(){try{bossLevel=!1,t.boss.pause(),t.boss.currentTime=0}catch(t){}t.win.play(),h=!1,u*=1.5,d+=1,e.setBoard(3,new SplashScreen("images/win.svg","","",S)),$(document).keydown((function(t){32!=t.which&&37!=t.which&&39!=t.which||setTimeout((function(){try{t.preventDefault()}catch(t){}}),1500)}))},E=function(t,i,s,a,h){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d"),r=0;a&&(o.fillStyle="#000",o.fillRect(0,0,n.width,n.height)),o.fillStyle=h||"#FFF",o.globalAlpha=i;for(var l=0;l<s;l++)o.fillRect(Math.floor(Math.random()*n.width),Math.floor(Math.random()*n.height),2,2);this.draw=function(t){var e=Math.floor(r),i=n.height-e;e>0&&t.drawImage(n,0,i,n.width,e,0,0,n.width,e),i>0&&t.drawImage(n,0,0,n.width,i,0,e,n.width,i)},this.step=function(e){r+=e*t,r%=n.height}},L=function(){this.setup("ship",{vx:0,reloadTime:.25,maxVel:200}),this.reload=this.reloadTime,this.x=e.width/2-this.w/2,this.y=e.height-e.playerOffset-this.h,this.step=function(i){e.keys.left?this.vx=-this.maxVel:e.keys.right?this.vx=this.maxVel:this.vx=0,this.x+=this.vx*i,this.x<0?this.x=0:this.x>e.width-this.w&&(this.x=e.width-this.w),this.reload-=i,e.keys.fire&&this.reload<0&&(e.keys.fire=!1,this.reload=this.reloadTime,t.fire.play(),this.board.add(new C(this.x,this.y+this.h/2)),this.board.add(new C(this.x+this.w,this.y+this.h/2)))}};L.boost=function(){if(0==l)if(t.power.play(),n=600,l=!0,e.playerHealth=n,s.match(/android/)||e.width<=576)e.setBoard(0,new E(100,.6,100,!0,"#00A9E0"));else{e.setBoard(0,new E(60,.4,100,!0)),e.setBoard(1,new E(150,.6,100)),e.setBoard(2,new E(300,.8,50,!1,"#00A9E0"));var i=setInterval((function(){n<o&&(e.setBoard(0,new E(20,.4,100,!0)),e.setBoard(1,new E(50,.6,100)),e.setBoard(2,new E(150,.8,50,!1,"#FFFFFF")),clearInterval(i))}),3e3)}},L.prototype=new Sprite,L.prototype.type=1,L.prototype.hit=function(i){0==isNaN(i)&&(n-=i,t.hit.play(),e.playerHealth=n),n<=0&&function(){n=o;try{bossLevel=!1,t.boss.pause(),t.boss.currentTime=0,t.start.pause(),t.start.currentTime=0}catch(t){}t.lose.play(),u=1,h=!0,d=0,e.setBoard(3,new SplashScreen("images/loss.svg","","",S)),$(document).keydown((function(t){32!=t.which&&37!=t.which&&39!=t.which||setTimeout((function(){try{t.preventDefault()}catch(t){}}),1500)}))}()};var C=function(t,e){this.setup("missile",{vy:-700,damage:10}),this.x=t-this.w/2,this.y=e-this.h};C.prototype=new Sprite,C.prototype.type=2,C.prototype.step=function(t){this.y+=this.vy*t;var e=this.board.collide(this,4);e?(e.hit(this.damage),this.board.remove(this)):this.y<-this.h&&this.board.remove(this)};var _=function(t,e){this.merge(this.baseParameters),this.setup(t.sprite,t),this.merge(e)};(_.prototype=new Sprite).type=4,_.prototype.baseParameters={A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0,t:0,reloadTime:.75,reload:0},_.prototype.step=function(t){this.t+=t,this.vx=this.A+this.B*Math.sin(this.C*this.t+this.D),this.vy=this.E+this.F*Math.sin(this.G*this.t+this.H),this.x+=this.vx*t,this.y+=this.vy*t;var i=this.board.collide(this,1);i&&(i.hit(this.damage),this.board.remove(this)),Math.random()<.01&&this.reload<=0&&(this.reload=this.reloadTime,2==this.missiles?(this.board.add(new H(this.x+this.w-2,this.y+this.h)),this.board.add(new H(this.x+2,this.y+this.h))):this.board.add(new H(this.x+this.w/2,this.y+this.h))),this.reload-=t,(this.y>e.height||this.x<-this.w||this.x>e.width)&&this.board.remove(this)},_.prototype.hit=function(i){this.health-=i,this.health<=0&&this.board.remove(this)&&(e.points+=this.points||100,this.board.add(new I(this.x+this.w/2,this.y+this.h/2)),t.boom.play())};var H=function(t,e){this.setup("enemy_missile",{vy:200,damage:10}),this.x=t-this.w/2,this.y=e};H.prototype=new Sprite,H.prototype.type=8,H.prototype.step=function(t){this.y+=this.vy*t;var i=this.board.collide(this,1);i?(i.hit(this.damage),this.board.remove(this)):this.y>e.height&&this.board.remove(this)};var I=function(t,e){this.setup("explosion",{frame:0}),this.x=t-this.w/2,this.y=e-this.h/2};function q(){if(0==a)try{t.start.play(),a=!0,S()}catch(t){}}I.prototype=new Sprite,I.prototype.step=function(t){this.frame++,this.frame>=12&&this.board.remove(this)},$(document).ready((function(){$("#game").click((function(){q()}))})),document.addEventListener("touchend",q),window.addEventListener("load",(function(){e.initialize("game",p,f)}))})(),(()=>{function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","UA-136336-17")})()})();